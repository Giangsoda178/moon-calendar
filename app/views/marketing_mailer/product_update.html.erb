<h2 style="margin: 0 0 16px 0; color: <%= email_colors[:foreground] %>; font-size: 24px; font-weight: 600;">
  Product Update<% version = @update[:version] || @update.try(:version) %><%= ": #{version}" if version %>
</h2>

<p style="margin: 0 0 16px 0;">
  Hi <%= @user.respond_to?(:name) ? @user.name : "there" %>,
</p>

<p style="margin: 0 0 16px 0; color: <%= email_colors[:foreground] %>;">
  <%= @update[:intro] || @update.try(:intro) || "We've been busy improving the product. Here's what's new:" %>
</p>

<% features = @update[:features] || @update.try(:features) %>
<% if features&.any? %>
  <h3 style="margin: 24px 0 12px 0; color: <%= email_colors[:foreground] %>; font-size: 16px; font-weight: 600;">
    New Features
  </h3>
  <ul style="margin: 0 0 16px 0; padding-left: 20px; color: <%= email_colors[:foreground] %>;">
    <% features.each do |feature| %>
      <li style="margin-bottom: 8px;"><%= feature %></li>
    <% end %>
  </ul>
<% end %>

<% improvements = @update[:improvements] || @update.try(:improvements) %>
<% if improvements&.any? %>
  <h3 style="margin: 24px 0 12px 0; color: <%= email_colors[:foreground] %>; font-size: 16px; font-weight: 600;">
    Improvements
  </h3>
  <ul style="margin: 0 0 16px 0; padding-left: 20px; color: <%= email_colors[:foreground] %>;">
    <% improvements.each do |item| %>
      <li style="margin-bottom: 8px;"><%= item %></li>
    <% end %>
  </ul>
<% end %>

<% bug_fixes = @update[:bug_fixes] || @update.try(:bug_fixes) %>
<% if bug_fixes&.any? %>
  <h3 style="margin: 24px 0 12px 0; color: <%= email_colors[:foreground] %>; font-size: 16px; font-weight: 600;">
    Bug Fixes
  </h3>
  <ul style="margin: 0 0 16px 0; padding-left: 20px; color: <%= email_colors[:foreground] %>;">
    <% bug_fixes.each do |item| %>
      <li style="margin-bottom: 8px;"><%= item %></li>
    <% end %>
  </ul>
<% end %>

<%= render "mailers/shared/button", text: "See Full Changelog", url: @update[:changelog_url] || @update.try(:changelog_url) || "#", icon: :external_link %>

<p style="margin: 16px 0 0 0; font-size: 14px; color: <%= email_colors[:muted_foreground] %>;">
  Have feedback? We'd love to hear from you. Reply to this email or visit our feedback page.
</p>

<%= render "mailers/shared/divider" %>

<p style="margin: 0; font-size: 12px; color: <%= email_colors[:muted_foreground] %>; text-align: center;">
  <a href="<%= @unsubscribe_url || "#" %>" style="color: <%= email_colors[:muted_foreground] %>;">Unsubscribe</a>
</p>
